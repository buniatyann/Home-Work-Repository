# Compiler to use
CXX = g++

# Compiler flags
CXXFLAGS = -std=c++20 -O3 -Wall -Wextra

# Linker flags (include filesystem library for GCC < 9)
LDFLAGS = -lstdc++fs

# Target executable
TARGET = fs

# Source files
SOURCES = main.cpp FileSystem.cpp

# Object files
OBJECTS = $(SOURCES:.cpp=.o)

# Header files
HEADERS = FileSystem.h

# Default target
all: $(TARGET)

# Link object files to create executable
$(TARGET): $(OBJECTS)
    $(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS)

# Compile main.cpp to main.o
main.o: main.cpp $(HEADERS)
    $(CXX) $(CXXFLAGS) -c main.cpp -o main.o

# Compile FileSystem.cpp to FileSystem.o
FileSystem.o: FileSystem.cpp $(HEADERS)
    $(CXX) $(CXXFLAGS) -c FileSystem.cpp -o FileSystem.o

# Clean up generated files
clean:
    rm -f $(OBJECTS) $(TARGET)

# Phony targets
.PHONY: all clean